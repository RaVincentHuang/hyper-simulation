# 2026-02-04

## #1 常规性的
更新代码最好还是用你的号来`git commit`和`push`。这样我能分辨出来哪些是你改的，哪些是我改的。

或者你再`docs/update`里面具体标一下你改了什么地方。我好做code review。

## #2 今天最好弄完log的事情
我在 [query_instance](../../src/hyper_simulation/query_instance.py#L14-L37) 中加了 log 保存的字段，你在记录 log的时候也保存一份在那里。

对于simulation的log，我在 simulation-log这个库里加入了 

```python
class Event:
    """
    Event class.
    """
    phrase: str
    sc_id: int
    binary_relation: set[tuple[int, int]]
    
    def __init__(self, phrase: str, sc_id: int, binary_relation: set[tuple[int, int]]): ...

def get_hyper_simulation_trace(self) -> list[Event]: 
    """
    Get trace events of last time hyper simulation.
    """
```

其中 `sc_id` 是我们载入到Delta中自动获得的 sc_pair 的id，最好可以还原到原本的sc_pair上。binary_relation根据phrase来，基本上表示的是d-match的结果。

我们最终需要记录的是：
- 对于那些回答错误的query_instance
- 对于那些效果不如contradoc的query_instance
- 我们记录如下的信息：
    - Hyper Simulation 各个 step 的 trace
    - 打印的Hypergraph
    - 原始的文本
    - 如果有的ground truth
- 一个 query 存在一个单独的文件夹里，各个内容分开。
- 例如 `logs/hotpotqa/qa_failed | short | contra_groundtruth/{query_id}/`


